# yad_rest

---


Лунная призма, дай мне сил!


---

### Архитектура
Система из трех Docker - контейнеров:
* yad_app - непосредственно приложение, с uWSGI
* yad_mongo - Mongo DB
* yad_nginx - Nginx под задачи роутинга

Приложение работает в 4 потока и может обрабатывать несколько задач сразу. Тестами покрыты все методы.

Для тестирования/запуска нужны __Docker__ и __docker-compose__


#### Тестирование
* Стать root:
```
sudo su
```

Для тестирвования на машине, на которой запускаются тесты, нужно:
* Поднять контейнер. Убедиться, что в Dockerfile указанно
```
ENV TESTING TRUE
```

* В папке с приложением, выполнить docker-compose, дождаться выполнения процесса.
```
docker-compose -f docker-compose.yml up -d --build
```

* Запустить тесты. Предусматривается, что приложение запущенно на __localhost:8080__, иначе необходимо сменить константы в tests.py.
Для запуска тестов в системе должен быть модуль __requests__
```
python -m unittest tests.py
```


#### Деплой
* Стать root:
```
sudo su
```

* Поднять контейнер. Убедиться, что в Dockerfile указанно
```
ENV TESTING FALSE
```

* В папке с приложением, выполнить docker-compose, дождаться выполнения процесса.
```
docker-compose -f docker-compose.yml up -d --build
```
